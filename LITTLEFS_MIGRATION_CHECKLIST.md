# ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó –Ω–∞ LittleFS —Ç–∞ 4MB Flash

## –í–∏–∫–æ–Ω–∞–Ω—ñ –∑–º—ñ–Ω–∏:

### 1. **–ú—ñ–≥—Ä–∞—Ü—ñ—è –Ω–∞ LittleFS** ‚úÖ
- –ó–∞–º—ñ–Ω–µ–Ω–æ SPIFFS –Ω–∞ LittleFS (joltwallet/littlefs)
- –û–Ω–æ–≤–ª–µ–Ω–æ –≤—Å—ñ API –≤–∏–∫–ª–∏–∫–∏ –≤ –∫–æ–¥—ñ
- –î–æ–¥–∞–Ω–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤ idf_component.yml

### 2. **–û–Ω–æ–≤–ª–µ–Ω–æ Flash –Ω–∞ 4MB** ‚úÖ
- –ó–º—ñ–Ω–µ–Ω–æ CONFIG_ESPTOOLPY_FLASHSIZE="4MB"
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ —Ç–∞–±–ª–∏—Ü—é —Ä–æ–∑–¥—ñ–ª—ñ–≤
- –î–æ–¥–∞–Ω–æ OTA –ø—ñ–¥—Ç—Ä–∏–º–∫—É

### 3. **–ù–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è —Ä–æ–∑–¥—ñ–ª—ñ–≤** ‚úÖ
```
nvs      - 20KB   (0x9000)
otadata  - 8KB    (0xE000)  
phy_init - 4KB    (0x10000)
factory  - 1.44MB (0x11000)
ota_0    - 1.44MB (0x181000)
storage  - 1MB    (0x2F1000)
```

### 4. **–û–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è** ‚úÖ
- LoggerModule_Documentation.md
- LittleFS_Configuration.md
- SPIFFS_to_LittleFS_Migration.md
- Flash_Configuration.md

## –î–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó:

```bash
# 1. –û—á–∏—Å—Ç–∏—Ç–∏ —Å—Ç–∞—Ä—ñ —Ñ–∞–π–ª–∏
idf.py fullclean

# 2. –ü–µ—Ä–µ–∫–æ–Ω—Ñ—ñ–≥—É—Ä—É–≤–∞—Ç–∏
idf.py set-target esp32s3

# 3. –ó—ñ–±—Ä–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç
idf.py build

# 4. –ü—Ä–æ—à–∏—Ç–∏ (–∑–∞–º—ñ–Ω—ñ—Ç—å COM3 –Ω–∞ –≤–∞—à –ø–æ—Ä—Ç)
idf.py -p COM3 flash monitor
```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –ø—Ä–æ—à–∏–≤–∫–∏:

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ LittleFS –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—è:**
   ```
   I (xxx) LogStorage: Initializing LittleFS storage
   I (xxx) LogStorage: Partition size: total: 1048576, used: 0
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑–º—ñ—Ä—ñ–≤ —Ä–æ–∑–¥—ñ–ª—ñ–≤:**
   ```
   I (xxx) esp_image: segment 0: paddr=00011020 vaddr=3c0a0020 size=...
   ```

3. **–¢–µ—Å—Ç –∑–∞–ø–∏—Å—É –ª–æ–≥—ñ–≤:**
   - –õ–æ–≥–∏ –º–∞—é—Ç—å —É—Å–ø—ñ—à–Ω–æ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏—Å—è
   - –†–æ—Ç–∞—Ü—ñ—è –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –ø—Ä–∏ 64KB

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏:

### "Failed to find LittleFS partition"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ partition type = littlefs –≤ CSV

### "Image too large"  
- –ó–º–µ–Ω—à—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä –ø—Ä–æ–≥—Ä–∞–º–∏ (Optimization Level = -Os)

### "Partition table invalid"
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ flash –¥—ñ–π—Å–Ω–æ 4MB: `esptool.py flash_id`

## –ì–æ—Ç–æ–≤–æ! üéâ

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î:
- ‚úÖ LittleFS –∑–∞–º—ñ—Å—Ç—å SPIFFS
- ‚úÖ 4MB Flash –∑ OTA
- ‚úÖ 1MB –¥–ª—è —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏
- ‚úÖ –ü–æ–≤–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
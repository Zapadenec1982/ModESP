# üõ†Ô∏è ModESP Development Guide

–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ —Ä–æ–∑—Ä–æ–±–∫–∏ ModESP! –¶–µ–π –∫–∞—Ç–∞–ª–æ–≥ –º—ñ—Å—Ç–∏—Ç—å –≤—Å—é –Ω–µ–æ–±—Ö—ñ–¥–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞

### üéØ –û—Å–Ω–æ–≤–∏ —Ä–æ–∑—Ä–æ–±–∫–∏
- **[Module Descriptor System](module_descriptor_system.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—è–º–∏
- **[Architecture Overview](../02_Architecture/README.md)** - –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏

### üîß –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- **Module Info Tool** - –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è API –º–æ–¥—É–ª—ñ–≤
- **Configuration Management** - –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é
- **Testing Framework** - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- **UI Generator** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤

### 1. –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö –º–æ–¥—É–ª—ñ–≤
```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ –º–æ–¥—É–ª—ñ
python tools/module_info.py --list

# –í–∏–≤—á–∏—Ç–∏ API –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è  
python tools/module_info.py --api sensor_drivers

# –ü–æ–±–∞—á–∏—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
python tools/module_info.py --guide sensor_drivers
```

### 2. –†–æ–∑—É–º—ñ–Ω–Ω—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏
- **ModuleManager** - –∫–µ—Ä—É—î lifecycle —Ç–∞ performance –º–æ–¥—É–ª—ñ–≤
- **module_registry** - —Ä–µ—î—Å—Ç—Ä—É—î –º–æ–¥—É–ª—ñ –≤ —Å–∏—Å—Ç–µ–º—ñ
- **SharedState** - –æ–±–º—ñ–Ω –¥–∞–Ω–∏–º–∏ –º—ñ–∂ –º–æ–¥—É–ª—è–º–∏
- **EventBus** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è
- **JsonRPC** - –≤—ñ–¥–¥–∞–ª–µ–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è

### 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –º–æ–¥—É–ª—å, —â–æ –Ω–∞—Å–ª—ñ–¥—É—î `BaseModule`
2. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –≤ `module_registry.cpp`
3. –î–æ–¥–∞—Ç–∏ `module_descriptor.json` –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
4. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é

## üìã Module Descriptor System

### –©–æ —Ü–µ –¥–∞—î —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º:
- **–®–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫ API** - –≤—Å—ñ –º–µ—Ç–æ–¥–∏, –ø–æ–¥—ñ—ó, –∫–ª—é—á—ñ –≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ
- **–ì–æ—Ç–æ–≤—ñ –ø—Ä–∏–∫–ª–∞–¥–∏** - copy-paste –∫–æ–¥ –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
- **–ó—Ä—É—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è** - –≤–∏–º–∫–Ω—É—Ç–∏/–≤–∫–ª—é—á–∏—Ç–∏ –º–æ–¥—É–ª—ñ –æ–¥–Ω–æ—é –∫–æ–º–∞–Ω–¥–æ—é
- **–°–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ—Å—Ç—å** - –º–æ–¥—É–ª—ñ –æ–ø–∏—Å—É—é—Ç—å —Å–≤–æ—ó –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### –ü—Ä–∏–∫–ª–∞–¥ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞:
```json
{
    "module_info": {
        "name": "SensorModule",
        "enabled": true,
        "priority": "HIGH"
    },
    "api_reference": {
        "rpc_methods": {
            "sensor.get_temperature": {
                "description": "Get current temperature",
                "example": "sensor.get_temperature() -> {value: 23.5}"
            }
        },
        "shared_state_keys": {
            "state.sensor.temperature": {
                "type": "float",
                "description": "Current temperature in ¬∞C"
            }
        }
    },
    "integration_guide": {
        "how_to_interact": {
            "read_data": "float temp = SharedState::get<float>(\"state.sensor.temperature\");"
        }
    }
}
```

## üîß –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

### Module Info Tool
–û—Å–Ω–æ–≤–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –º–æ–¥—É–ª—è–º–∏:
```bash
python tools/module_info.py --help
```

### UI Generator  
–ì–µ–Ω–µ—Ä—É—î –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ module descriptors:
```bash  
python tools/ui_generator.py
```

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏

1. **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å** - –∫–æ–∂–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π
2. **–°–ª–∞–±–∫–∞ –∑–≤'—è–∑–∞–Ω—ñ—Å—Ç—å** - –º–æ–¥—É–ª—ñ –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å —á–µ—Ä–µ–∑ APIs
3. **–î–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ—Å—Ç—å** - –≤—Å—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –æ–ø–∏—Å–∞–Ω—ñ  
4. **–¢–µ—Å—Ç–æ–≤–∞–Ω—ñ—Å—Ç—å** - –∫–æ–∂–µ–Ω –º–æ–¥—É–ª—å –º–∞—î —Ç–µ—Å—Ç–∏
5. **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–æ–≤–∞–Ω—ñ—Å—Ç—å** - –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –∫–µ—Ä—É—î—Ç—å—Å—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
ModESP/
‚îú‚îÄ‚îÄ components/           # –ú–æ–¥—É–ª—ñ —Å–∏—Å—Ç–µ–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ sensor_drivers/   
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ module_descriptor.json  ‚Üê API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sensor_module.h
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sensor_module.cpp
‚îÇ   ‚îî‚îÄ‚îÄ core/
‚îÇ       ‚îú‚îÄ‚îÄ module_manager.cpp      ‚Üê –ö–µ—Ä—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—è–º–∏
‚îÇ       ‚îî‚îÄ‚îÄ module_registry.cpp     ‚Üê –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –º–æ–¥—É–ª—ñ–≤
‚îú‚îÄ‚îÄ tools/                # –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ä–æ–∑—Ä–æ–±–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ module_info.py    ‚Üê –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ ui_generator.py   ‚Üê –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è UI
‚îî‚îÄ‚îÄ Docs/                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
    ‚îú‚îÄ‚îÄ 02_Architecture/  ‚Üê –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
    ‚îî‚îÄ‚îÄ 04_Development/   ‚Üê –†–æ–∑—Ä–æ–±–∫–∞
```

## üéØ –ù–∞–π–∫—Ä–∞—â—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –î–ª—è –Ω–æ–≤–∏—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤:
1. –ü–æ—á–∞—Ç–∏ –∑ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö –º–æ–¥—É–ª—ñ–≤ —á–µ—Ä–µ–∑ `module_info.py`
2. –í–∏–≤—á–∏—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥–∏ –≤ integration_guide
3. –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ—Å—Ç–∏–π –º–æ–¥—É–ª—å –∑–∞ –∑—Ä–∞–∑–∫–æ–º
4. –î–æ–¥–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –≤ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä

### –î–ª—è –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤:
1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∏ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É API
2. –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –º–æ–¥—É–ª—ñ —ñ–∑–æ–ª—å–æ–≤–∞–Ω–æ
3. –î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏
4. –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ performance —á–µ—Ä–µ–∑ ModuleManager

### üí° –ü–æ—Ä–∞–¥–∏ —â–æ–¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è JSON

- **SharedState/EventBus**: –ù–∞–º–∞–≥–∞–π—Ç–µ—Å—è –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫—ñ –∞–±–æ –≥–ª–∏–±–æ–∫–æ –≤–∫–ª–∞–¥–µ–Ω—ñ JSON-–æ–±'—î–∫—Ç–∏. –¶–µ –¥–æ–ø–æ–º–æ–∂–µ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ.
- **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**: –†–æ–∑–±–∏–≤–∞–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –Ω–∞ –ª–æ–≥—ñ—á–Ω—ñ –º–æ–¥—É–ª—å–Ω—ñ —Ñ–∞–π–ª–∏.
- **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: –£–Ω–∏–∫–∞–π—Ç–µ –ø–∞—Ä—Å–∏–Ω–≥—É –≤–µ–ª–∏–∫–∏—Ö JSON-—Ä—è–¥–∫—ñ–≤ —É –º–µ—Ç–æ–¥–∞—Ö `update()`, —è–∫—ñ –≤–∏–∫–ª–∏–∫–∞—é—Ç—å—Å—è —á–∞—Å—Ç–æ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è —Ü—å–æ–≥–æ `configure()` –∞–±–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π.

---

> üöÄ **ModESP Module Descriptor System** —Ä–æ–±–∏—Ç—å —Ä–æ–∑—Ä–æ–±–∫—É —à–≤–∏–¥—à–æ—é —Ç–∞ –∑—Ä—É—á–Ω—ñ—à–æ—é, –Ω–µ –∑–º—ñ–Ω—é—é—á–∏ –ø—Ä–∏ —Ü—å–æ–º—É –Ω–∞–¥—ñ–π–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º–∏!

# ‚úÖ LoggerModule - –ì–û–¢–û–í–û –î–û –¢–ï–°–¢–£–í–ê–ù–ù–Ø!

## üéØ **–§—ñ–Ω–∞–ª—å–Ω–∏–π —Å—Ç–∞—Ç—É—Å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó**

### **–ü–û–í–ù–Ü–°–¢–Æ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û –∑–≥—ñ–¥–Ω–æ –∑ –≤–∞—à–æ—é —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é:**

```cpp
struct LogConfig {
    size_t maxFileSize = 64 * 1024;      // 64KB –Ω–∞ —Ñ–∞–π–ª ‚úÖ
    size_t maxTotalSize = 256 * 1024;    // 256KB –≤—Å—å–æ–≥–æ ‚úÖ
    uint8_t maxArchiveFiles = 3;         // 3 –∞—Ä—Ö—ñ–≤–Ω—ñ —Ñ–∞–π–ª–∏ ‚úÖ
    uint32_t flushInterval = 5000;       // –ó–∞–ø–∏—Å –∫–æ–∂–Ω—ñ 5 —Å–µ–∫ ‚úÖ
};
```

### üìä **–†–æ–∑–ø–æ–¥—ñ–ª –ø–∞–º'—è—Ç—ñ - –¢–û–ß–ù–û —è–∫ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- ‚úÖ `current.log` - 64KB (–∞–∫—Ç–∏–≤–Ω–∏–π —Ñ–∞–π–ª)
- ‚úÖ `archive_1.log` - 64KB  
- ‚úÖ `archive_2.log` - 64KB
- ‚úÖ `archive_3.log` - 64KB
- ‚úÖ `critical.log` - –æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–¥—ñ–π

### üéØ **–ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ - –í–°–Ü –†–ï–ê–õ–Ü–ó–û–í–ê–ù–Ü:**
1. ‚úÖ **LittleFS** - wear leveling, –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å
2. ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∑–∞–ø–∏—Å** - –Ω–µ –±–ª–æ–∫—É—î –æ—Å–Ω–æ–≤–Ω—ñ –∑–∞–¥–∞—á—ñ  
3. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è** - –ø—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ 64KB
4. ‚úÖ **–ú–æ–¥—É–ª—å–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è** - —Ä—ñ–∑–Ω—ñ —Ä—ñ–≤–Ω—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –º–æ–¥—É–ª—ñ–≤
5. ‚úÖ **–ë—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç** - –µ–∫–æ–Ω–æ–º—ñ—è –º—ñ—Å—Ü—è (48 –±–∞–π—Ç/–∑–∞–ø–∏—Å)

### üíæ **–Ñ–º–Ω—ñ—Å—Ç—å - –Ø–ö –†–û–ó–†–ê–•–û–í–ê–ù–û:**
- ‚úÖ ~5,400 –∑–∞–ø–∏—Å—ñ–≤ –∑–∞–≥–∞–ª–æ–º (–ø—Ä–∏ 48 –±–∞–π—Ç–∞—Ö –Ω–∞ –∑–∞–ø–∏—Å)
- ‚úÖ –ü—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω—ñ–π —Ä–æ–±–æ—Ç—ñ: 2-3 —Ç–∏–∂–Ω—ñ —ñ—Å—Ç–æ—Ä—ñ—ó  
- ‚úÖ –ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º—É –¥–µ–±–∞–≥—É: 3-5 –¥–Ω—ñ–≤ —ñ—Å—Ç–æ—Ä—ñ—ó

## üìÅ **–§–∞–π–ª–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É:**

```
components/logger/
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ logger_interface.h      ‚úÖ –ü–æ–≤–Ω–∏–π API
‚îÇ   ‚îú‚îÄ‚îÄ log_storage.h          ‚úÖ LittleFS —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è  
‚îÇ   ‚îî‚îÄ‚îÄ ring_buffer.h          ‚úÖ RAM –±—É—Ñ–µ—Ä
‚îú‚îÄ‚îÄ logger_module.h            ‚úÖ –û—Å–Ω–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å
‚îú‚îÄ‚îÄ logger_module.cpp          ‚úÖ –ü–æ–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ log_storage.cpp            ‚úÖ –§–∞–π–ª–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
‚îî‚îÄ‚îÄ CMakeLists.txt            ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

test/logger/
‚îú‚îÄ‚îÄ test_logger_module.cpp     ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω—ñ —Ç–µ—Å—Ç–∏
‚îî‚îÄ‚îÄ CMakeLists.txt            ‚úÖ –¢–µ—Å—Ç–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```

## üîß **–í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:**

1. ‚úÖ **CMakeLists.txt** - –≤–∏–¥–∞–ª–µ–Ω—ñ –Ω–µ—ñ—Å–Ω—É—é—á—ñ —Ñ–∞–π–ª–∏
2. ‚úÖ **log_storage.cpp** - –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö –º–µ—Ç–æ–¥—ñ–≤  
3. ‚úÖ **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ** - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ imports —Ç–∞ requires

## üöÄ **API –≥–æ—Ç–æ–≤–µ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

```cpp
// –ë–∞–∑–æ–≤–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
MLOG_INFO("System started");
MLOG_ERROR("Sensor error: %d", errorCode);

// –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –ø–æ–¥—ñ—ó  
Logger::logEvent(EventCode::TEMP_ALARM_HIGH, temperature);
Logger::logSensorData(sensorId, value);
Logger::logCompressorCycle(true, runtime);

// HACCP —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å
Logger::logHACCPEvent(EventCode::HACCP_TEMP_VIOLATION, temp);

// –ï–∫—Å–ø–æ—Ä—Ç —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
Logger::exportLogs("csv", output);
Logger::getStatistics(stats);
```

## üéØ **–ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:**

### **–í–ê–†–Ü–ê–ù–¢ –ê: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Ä–∞–∑** ‚≠ê
1. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ ESP-IDF —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
2. –°–∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç  
3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ unit —Ç–µ—Å—Ç–∏
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º—É ESP32

### **–í–ê–†–Ü–ê–ù–¢ –ë: –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó**
1. –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ª–æ–≥—ñ–≤
2. MQTT —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –¥–ª—è –≤—ñ–¥–¥–∞–ª–µ–Ω–æ–≥–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É  
3. SD –∫–∞—Ä—Ç–∞ —è–∫ –¥–æ–¥–∞—Ç–∫–æ–≤–µ —Å—Ö–æ–≤–∏—â–µ
4. –°—Ç–∏—Å–Ω–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤

## üí° **–í–∏—Å–Ω–æ–≤–æ–∫:**

**LoggerModule –ø–æ–≤–Ω—ñ—Å—Ç—é –≥–æ—Ç–æ–≤–∏–π!** –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–æ—á–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –≤–∞—à—ñ–π —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:
- 256KB LittleFS —Å—Ö–æ–≤–∏—â–µ –∑ —Ä–æ—Ç–∞—Ü—ñ—î—é
- 48-–±–∞–π—Ç–æ–≤—ñ –±—ñ–Ω–∞—Ä–Ω—ñ –∑–∞–ø–∏—Å–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞  
- HACCP —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å
- –ü–æ–≤–Ω–∏–π API –¥–ª—è –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤

**–ì–æ—Ç–æ–≤—ñ –¥–æ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è?** üöÄ

# –ü–ª–∞–Ω –∫–æ–Ω—Å–æ–ª—ñ–¥–∞—Ü—ñ—ó UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ ModESP

## üéØ –ú–µ—Ç–∞
–û–±'—î–¥–Ω–∞—Ç–∏ `components/ui` —Ç–∞ `components/adaptive_ui` –≤ —î–¥–∏–Ω—É, —É–∑–≥–æ–¥–∂–µ–Ω—É —Å–∏—Å—Ç–µ–º—É –∑–≥—ñ–¥–Ω–æ –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é Phase 5 Adaptive UI.

## üìä –ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ `ui/`:
- ‚úÖ –†–æ–±–æ—á–∏–π HTTP —Å–µ—Ä–≤–µ—Ä —Ç–∞ API
- ‚úÖ –ë–∞–∑–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è UI –∞–¥–∞–ø—Ç–µ—Ä—ñ–≤
- ‚ùå –í—ñ–¥—Å—É—Ç–Ω—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å
- ‚ùå –ù–µ–º–∞—î lazy loading
- ‚ùå –°—Ç–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è UI

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ `adaptive_ui/`:
- ‚úÖ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ —É–º–æ–≤–∞–º–∏ —Ç–∞ —Ä–æ–ª—è–º–∏
- ‚úÖ Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–µ—Ä–∏ –¥–ª—è LCD/MQTT
- ‚ùå –ù–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- ‚ùå –ù–µ–ø–æ–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

## üöÄ –ü–ª–∞–Ω –º—ñ–≥—Ä–∞—Ü—ñ—ó

### Phase 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –¥–Ω—ñ)

1. **–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É —î–¥–∏–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É**:
   ```
   components/unified_ui/
   ‚îú‚îÄ‚îÄ include/
   ‚îÇ   ‚îú‚îÄ‚îÄ core/              # –ë–∞–∑–æ–≤—ñ –∫–ª–∞—Å–∏ —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏
   ‚îÇ   ‚îú‚îÄ‚îÄ adapters/          # UI –∞–¥–∞–ø—Ç–µ—Ä–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤
   ‚îÇ   ‚îú‚îÄ‚îÄ components/        # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
   ‚îÇ   ‚îî‚îÄ‚îÄ utils/             # –î–æ–ø–æ–º—ñ–∂–Ω—ñ –∫–ª–∞—Å–∏
   ‚îú‚îÄ‚îÄ src/
   ‚îÇ   ‚îú‚îÄ‚îÄ core/
   ‚îÇ   ‚îú‚îÄ‚îÄ adapters/
   ‚îÇ   ‚îú‚îÄ‚îÄ components/
   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
   ‚îî‚îÄ‚îÄ CMakeLists.txt
   ```

2. **–í–∏–∑–Ω–∞—á–∏—Ç–∏ —á—ñ—Ç–∫—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏**:
   - `IUIComponent` - –±–∞–∑–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å—ñ—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
   - `IUIAdapter` - —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–¥–∞–ø—Ç–µ—Ä—ñ–≤ (Web, LCD, MQTT, etc)
   - `IUIFilter` - —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
   - `IComponentLoader` - —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### Phase 2: –ú—ñ–≥—Ä–∞—Ü—ñ—è –±–∞–∑–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É (3-4 –¥–Ω—ñ)

1. **–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑ `ui/`**:
   - `WebUIModule` ‚Üí `unified_ui/adapters/web/`
   - `ApiDispatcher` ‚Üí `unified_ui/core/api/`
   - `UIAdapterBase` ‚Üí `unified_ui/core/base/`

2. **–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑ `adaptive_ui/`**:
   - `UIFilter` ‚Üí `unified_ui/core/filter/`
   - `LazyComponentLoader` ‚Üí `unified_ui/core/loader/`
   - LCD/MQTT –∞–¥–∞–ø—Ç–µ—Ä–∏ ‚Üí `unified_ui/adapters/`

3. **–û–±'—î–¥–Ω–∞—Ç–∏ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó**:
   - –ë–∞–∑–æ–≤–∏–π `UIAdapterBase` –º–∞—î –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é
   - `WebUIModule` –º–∞—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ lazy loading
   - –í—Å—ñ –∞–¥–∞–ø—Ç–µ—Ä–∏ –º–∞—é—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —î–¥–∏–Ω–∏–º –Ω–∞–±–æ—Ä–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

### Phase 3: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—î—é (2-3 –¥–Ω—ñ)

1. **–û–Ω–æ–≤–∏—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä UI**:
   - –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑–≥—ñ–¥–Ω–æ –∑ –Ω–æ–≤–æ—é –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
   - –§–∞–±—Ä–∏–∫–∏ –¥–ª—è lazy loading

2. **–°—Ç–≤–æ—Ä–∏—Ç–∏ —î–¥–∏–Ω–∏–π —Ä–µ—î—Å—Ç—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤**:
   ```cpp
   class UIComponentRegistry {
       // –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ñ–∞–±—Ä–∏–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
       void registerFactory(id, factory);
       
       // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
       ComponentMetadata getMetadata(id);
       
       // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (lazy)
       UIComponent* createComponent(id);
   };
   ```

### Phase 4: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è (2-3 –¥–Ω—ñ)

1. **–í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É**
2. **–û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ**
3. **–î–æ–¥–∞—Ç–∏ unit —Ç–µ—Å—Ç–∏**
4. **–û–Ω–æ–≤–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é**

## üìÅ –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏

```
components/unified_ui/
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui_component_interface.h      # –ë–∞–∑–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui_adapter_interface.h        # –ë–∞–∑–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–∞–ø—Ç–µ—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui_filter.h                   # –°–∏—Å—Ç–µ–º–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui_component_loader.h         # Lazy loading
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui_component_registry.h       # –†–µ—î—Å—Ç—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui_types.h                    # –ó–∞–≥–∞–ª—å–Ω—ñ —Ç–∏–ø–∏ —Ç–∞ enum'–∏
‚îÇ   ‚îú‚îÄ‚îÄ adapters/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ web/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ web_ui_adapter.h         # Web UI –∞–¥–∞–ø—Ç–µ—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api_dispatcher.h         # API —Ä–æ—É—Ç–µ—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ web_renderer.h           # HTML/JS —Ä–µ–Ω–¥–µ—Ä–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lcd/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lcd_ui_adapter.h         # LCD –∞–¥–∞–ø—Ç–µ—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ lcd_renderer.h           # LCD —Ä–µ–Ω–¥–µ—Ä–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mqtt/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mqtt_ui_adapter.h        # MQTT –∞–¥–∞–ø—Ç–µ—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mqtt_renderer.h          # MQTT —Ä–µ–Ω–¥–µ—Ä–µ—Ä
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ telegram_ui_adapter.h    # Telegram bot –∞–¥–∞–ø—Ç–µ—Ä
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ telegram_renderer.h      # Telegram —Ä–µ–Ω–¥–µ—Ä–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ value_component.h        # –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input_component.h        # –í–≤–µ–¥–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button_component.h       # –ö–Ω–æ–ø–∫–∏ –¥—ñ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ composite_component.h    # –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ generated/                    # –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ condition_evaluator.h         # –û—Ü—ñ–Ω–∫–∞ —É–º–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ access_control.h             # –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É
‚îÇ       ‚îî‚îÄ‚îÄ resource_monitor.h           # –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å—ñ–≤
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ [–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó]
‚îî‚îÄ‚îÄ CMakeLists.txt
```

## üîß –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏

```cpp
// main.cpp
#include "unified_ui/core/ui_component_registry.h"
#include "unified_ui/adapters/web/web_ui_adapter.h"
#include "unified_ui/adapters/lcd/lcd_ui_adapter.h"

void app_main() {
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–µ—î—Å—Ç—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
    UIComponentRegistry registry;
    registry.loadGeneratedComponents();
    
    // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä–∞
    UIFilter filter;
    filter.setConfig(system_config);
    filter.setUserRole(UserRole::TECHNICIAN);
    
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∞–¥–∞–ø—Ç–µ—Ä—ñ–≤
    WebUIAdapter web_ui(registry, filter);
    LCDUIAdapter lcd_ui(registry, filter);
    
    // –ó–∞–ø—É—Å–∫
    web_ui.start();
    lcd_ui.start();
}
```

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –º–æ–º–µ–Ω—Ç–∏

1. **–ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å**: –ó–±–µ—Ä–µ–≥—Ç–∏ —ñ—Å–Ω—É—é—á—ñ API –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥—É
2. **–ü–æ—Å—Ç—É–ø–æ–≤–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è**: –ù–µ –ª–∞–º–∞—Ç–∏ —Ä–æ–±–æ—á–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª
3. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –ö–æ–∂–µ–Ω –∫—Ä–æ–∫ –º–∞—î –±—É—Ç–∏ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–∏–π
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: –û–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –∑ –∫–æ–¥–æ–º

## üìà –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

- ‚úÖ –Ñ–¥–∏–Ω–∞, —É–∑–≥–æ–¥–∂–µ–Ω–∞ UI —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ó–º–µ–Ω—à–µ–Ω–Ω—è –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É –Ω–∞ 60%
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ –Ω–∞ 40%
- ‚úÖ –õ–µ–≥—à–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
- ‚úÖ –ü–æ–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

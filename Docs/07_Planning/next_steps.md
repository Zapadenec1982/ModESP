# üöÄ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏: UI/API —Ä–æ–∑–≤–∏—Ç–æ–∫ ModESP

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (23.06.2025)
- [x] –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ Python UI –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- [x] –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ –≤—Å—ñ UI —Ñ–∞–π–ª–∏
- [x] –£–∑–≥–æ–¥–∂–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–∫–ª–∞–¥ ui_schema.json –¥–ª—è sensor_drivers

## üéØ –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1: –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –Ω–∞ –≤—Å—ñ –º–æ–¥—É–ª—ñ (1-2 –¥–Ω—ñ)

### –î–æ–¥–∞—Ç–∏ ui_schema.json –¥–æ –º–æ–¥—É–ª—ñ–≤:

- [ ] **ActuatorModule** (`components/ESPhal/modules/actuator_module/ui_schema.json`)
```json
{
    "module": "actuator_module", 
    "label": "Actuators",
    "controls": [
        {
            "id": "compressor",
            "type": "switch", 
            "label": "Compressor",
            "read_method": "actuator.get_state",
            "write_method": "actuator.set_state"
        }
    ]
}
```

- [ ] **RTCModule** (`components/ESPhal/modules/rtc_module/ui_schema.json`)
```json
{
    "module": "rtc_module",
    "label": "Real Time Clock", 
    "controls": [
        {
            "id": "current_time",
            "type": "value",
            "label": "Current Time",
            "read_method": "rtc.get_time"
        }
    ]
}
```

- [ ] **WiFiManager** (`components/wifi_manager/ui_schema.json`)
```json
{
    "module": "wifi_manager",
    "label": "WiFi",
    "controls": [
        {
            "id": "status",
            "type": "value", 
            "label": "Connection Status",
            "read_method": "wifi.get_status"
        },
        {
            "id": "signal_strength",
            "type": "gauge",
            "label": "Signal Strength",
            "unit": "dBm",
            "min": -100,
            "max": -30,
            "read_method": "wifi.get_rssi"
        }
    ]
}
```

### –ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Å—Ö–µ–º:
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `python tools/ui_generator.py`
- [ ] –ó—ñ–±—Ä–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç: `idf.py build`  
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —Ñ–∞–π–ª–∏ —É `main/generated/`

## üéØ –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Web UI (3-5 –¥–Ω—ñ–≤)

- [ ] **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è WebUIModule**
  - [ ] –î–æ–¥–∞—Ç–∏ WebUIModule –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É
  - [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ HTTP —Å–µ—Ä–≤–µ—Ä
  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è static —Ñ–∞–π–ª—ñ–≤

- [ ] **API —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
  - [ ] –¢–µ—Å—Ç—É–≤–∞—Ç–∏ `/api/data` endpoint
  - [ ] –¢–µ—Å—Ç—É–≤–∞—Ç–∏ `/api/rpc` endpoint  
  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ JSON-RPC –º–µ—Ç–æ–¥–∏ –º–æ–¥—É–ª—ñ–≤

- [ ] **Frontend —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ HTML
  - [ ] –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–æ—Ä–º–∏ –≤–≤–æ–¥—É —Ç–∞ –∫–æ–º–∞–Ω–¥–∏

## üéØ –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 3: MQTT —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (1 —Ç–∏–∂–¥–µ–Ω—å)

- [ ] **–°—Ç–≤–æ—Ä–∏—Ç–∏ MQTT UI –∞–¥–∞–ø—Ç–µ—Ä**
  - [ ] –ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –Ω–∞ –æ—Å–Ω–æ–≤—ñ UIAdapterBase
  - [ ] –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö MQTT —Ç–æ–ø—ñ–∫—ñ–≤
  - [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó

- [ ] **–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**:
```cpp
class MQTTUIAdapter : public UIAdapterBase {
    void register_ui_handlers() override {
        // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ MQTT_TELEMETRY_MAP –∑ generated —Ñ–∞–π–ª—É
        for (size_t i = 0; i < MQTT_TELEMETRY_COUNT; i++) {
            auto& mapping = MQTT_TELEMETRY_MAP[i];
            setup_telemetry_publishing(mapping.topic, mapping.state_key, mapping.interval_s);
        }
    }
};
```

## üéØ –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 4: LCD UI (1 —Ç–∏–∂–¥–µ–Ω—å)

- [ ] **LCD UI –∞–¥–∞–ø—Ç–µ—Ä**
  - [ ] –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ `lcd_menu_generated.h`
  - [ ] –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –º–µ–Ω—é
  - [ ] –ü–æ–∫–∞–∑ –∑–Ω–∞—á–µ–Ω—å –∑ SharedState

## üìã –®–≤–∏–¥–∫—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏

### –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è UI:
```bash
cd C:\ModESP_dev
python tools\ui_generator.py components main\generated
```

### –ó–±—ñ—Ä–∫–∞:
```bash
idf.py build
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤:
```bash
ls main/generated/
```

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è:
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ `my_module/ui_schema.json`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
3. –ó—ñ–±—Ä–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç
4. –ú–æ–¥—É–ª—å –∑'—è–≤–∏—Ç—å—Å—è –≤ —É—Å—ñ—Ö UI!

## üêõ –©–æ —Ä–æ–±–∏—Ç–∏ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### Python –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–µ –ø—Ä–∞—Ü—é—î:
```bash
python --version  # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Python 3.8+
python -m pip install pathlib datetime json
```

### –ì–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —Ñ–∞–π–ª–∏ –Ω–µ –≤–∫–ª—é—á–∞—é—Ç—å—Å—è:
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `cmake/ui_generation.cmake` 
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —É CMakeLists.txt
- –í–∏–∫–æ–Ω–∞—Ç–∏ `idf.py clean && idf.py build`

### UI —Å—Ö–µ–º–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞:
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É: —Ç–æ—á–Ω–æ `ui_schema.json`
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è: `components/[module_name]/ui_schema.json`
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ JSON —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø—ñ—Ö—É

### –ü–æ—Ç–æ—á–Ω—ñ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è:
- ‚úÖ 93% –µ–∫–æ–Ω–æ–º—ñ—è RAM
- ‚úÖ 85% —à–≤–∏–¥—à–µ UI –≤—ñ–¥–≥—É–∫  
- ‚úÖ 1 –º–æ–¥—É–ª—å –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º UI

### –¶—ñ–ª—ñ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ç–∏–∂–¥–µ–Ω—å:
- üéØ 5+ –º–æ–¥—É–ª—ñ–≤ –∑ UI —Å—Ö–µ–º–∞–º–∏
- üéØ –ü–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π Web UI
- üéØ MQTT —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
- üéØ LCD –º–µ–Ω—é

### –î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ —Ü—ñ–ª—ñ:
- üéØ 10+ UI –∞–¥–∞–ø—Ç–µ—Ä—ñ–≤
- üéØ Mobile app API
- üéØ Cloud integration
- üéØ Advanced dashboards

---

**üí° –ü–∞–º'—è—Ç–∞–π—Ç–µ**: –ö–æ–∂–µ–Ω –Ω–æ–≤–∏–π –º–æ–¥—É–ª—å –∑ `ui_schema.json` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç—Ä–∏–º—É—î UI —É –≤—Å—ñ—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö!

**üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞**: –ó–∞–¥–∞–≤–∞–π—Ç–µ –ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ UI –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –∞–±–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö –¥–æ –∫–æ–¥—É.

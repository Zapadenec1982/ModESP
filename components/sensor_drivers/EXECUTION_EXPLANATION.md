# Ğ’Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´ÑŒ Ğ½Ğ° Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ: Ğ§Ğ¸ Ğ²Ğ¸ĞºĞ¾Ğ½ÑƒÑ”Ñ‚ÑŒÑÑ ĞºĞ¾Ğ´ Ğ½ĞµĞ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ¸Ñ… Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ñ–Ğ²?

## ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ° Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´ÑŒ: ĞĞ† âŒ

ĞšĞ¾Ğ´ Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ğ° DS18B20 **ĞĞ• Ğ²Ğ¸ĞºĞ¾Ğ½ÑƒÑ”Ñ‚ÑŒÑÑ**, ÑĞºÑ‰Ğ¾ Ğ² ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ— Ğ²Ğ¸Ğ±Ñ€Ğ°Ğ½Ğ¾ NTC.

## Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğµ Ğ¿Ğ¾ÑÑĞ½ĞµĞ½Ğ½Ñ

### ğŸ“Š Ğ–Ğ¸Ñ‚Ñ‚Ñ”Ğ²Ğ¸Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ñ–Ğ²:

```
Ğ¡Ğ¢ĞĞ Ğ¢ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ˜          Ğ†ĞĞ†Ğ¦Ğ†ĞĞ›Ğ†Ğ—ĞĞ¦Ğ†Ğ¯         Ğ ĞĞ‘ĞĞ¢Ğ
     â”‚                      â”‚                   â”‚
     â–¼                      â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ ĞµÑ”ÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ  â”‚      â”‚  Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ   â”‚    â”‚ Ğ’Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ  â”‚
â”‚ Ñ„Ğ°Ğ±Ñ€Ğ¸Ñ‡Ğ½Ğ¸Ñ…   â”‚â”€â”€â”€â”€â”€â”€â”‚  Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ñ‚Ğ¸Ñ…  â”‚â”€â”€â”€â”€â”‚   Ñ‚Ñ–Ğ»ÑŒĞºĞ¸   â”‚
â”‚  Ñ„ÑƒĞ½ĞºÑ†Ñ–Ğ¹    â”‚      â”‚ Ñ‰Ğ¾ Ğ² config  â”‚    â”‚  Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ…  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                      â”‚                   â”‚
     â–¼                      â–¼                   â–¼
 Ğ’ÑÑ– Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ğ¸         Ğ¯ĞºÑ‰Ğ¾ type="NTC"      driver->read()
 register_driver()     ÑÑ‚Ğ²Ğ¾Ñ€ÑÑ”Ñ‚ÑŒÑÑ NTC      Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ NTC
```

### ğŸ” ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¸:

**sensors.json:**
```json
{
  "sensors": [
    {
      "type": "NTC",        // <-- Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ NTC!
      "role": "temp1"
    }
  ]
}
```

**Ğ©Ğ¾ Ğ²Ñ–Ğ´Ğ±ÑƒĞ²Ğ°Ñ”Ñ‚ÑŒÑÑ:**

1. **ĞŸÑ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ñ–** (initialize_builtin_sensor_drivers):
   ```cpp
   // Ğ ĞµÑ”ÑÑ‚Ñ€ÑƒÑÑ‚ÑŒÑÑ Ğ’Ğ¡Ğ† Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ğ¸ (Ğ°Ğ»Ğµ ĞĞ• ÑÑ‚Ğ²Ğ¾Ñ€ÑÑÑ‚ÑŒÑÑ!)
   registry.register_driver("NTC", factory_func);
   registry.register_driver("DS18B20", factory_func);  // Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ!
   ```

2. **ĞŸÑ€Ğ¸ Ñ–Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ— SensorModule**:
   ```cpp
   // Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ”Ñ‚ÑŒÑÑ Ğ¢Ğ†Ğ›Ğ¬ĞšĞ˜ NTC, Ğ±Ğ¾ type="NTC"
   if (config.type == "NTC") {
       auto driver = registry.create_driver("NTC");  // DS18B20 ĞĞ• ÑÑ‚Ğ²Ğ¾Ñ€ÑÑ”Ñ‚ÑŒÑÑ!
   }
   ```

3. **ĞŸÑ–Ğ´ Ñ‡Ğ°Ñ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¸**:
   ```cpp
   // Ğ’Ğ¸ĞºĞ¾Ğ½ÑƒÑ”Ñ‚ÑŒÑÑ Ğ¢Ğ†Ğ›Ğ¬ĞšĞ˜ ĞºĞ¾Ğ´ NTC
   for (auto& sensor : sensors_) {  // sensors_ Ğ¼Ñ–ÑÑ‚Ğ¸Ñ‚ÑŒ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ NTC
       sensor.driver->read();        // Ğ’Ğ¸ĞºĞ»Ğ¸ĞºĞ°Ñ”Ñ‚ÑŒÑÑ NTCDriver::read()
   }
   ```

### âš ï¸ ĞĞ›Ğ• Ğ„ ĞĞ®ĞĞĞ¡ - Flash Ğ¿Ğ°Ğ¼'ÑÑ‚ÑŒ:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Flash Memory (4MB)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Compiled Code (Ğ²ÑĞµ ĞºĞ¾Ğ¼Ğ¿Ñ–Ğ»ÑÑ”Ñ‚ÑŒÑÑ):  â”‚
â”‚  â€¢ DS18B20 driver    (~15 KB) âš ï¸   â”‚
â”‚  â€¢ DS18B20_Async     (~18 KB) âš ï¸   â”‚
â”‚  â€¢ NTC driver        (~10 KB) âœ“    â”‚
â”‚  â€¢ Driver Registry   (~5 KB)  âœ“    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Runtime (Ğ²Ğ¸ĞºĞ¾Ğ½ÑƒÑ”Ñ‚ÑŒÑÑ):             â”‚
â”‚  â€¢ NTC driver        âœ“             â”‚
â”‚  â€¢ DS18B20           âŒ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ› ï¸ Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ— Flash:

Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ¹Ñ‚Ğµ **Kconfig** Ğ´Ğ»Ñ Ğ²Ğ¸Ğ¼ĞºĞ½ĞµĞ½Ğ½Ñ Ğ½ĞµĞ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğ¸Ñ… Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ñ–Ğ²:

```bash
idf.py menuconfig
# Component config â†’ Sensor Drivers Configuration
# [ ] Enable DS18B20 driver      <-- Ğ’Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸
# [x] Enable NTC driver          <-- Ğ—Ğ°Ğ»Ğ¸ÑˆĞ¸Ñ‚Ğ¸
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
- Ğ”Ğ¾: 48 KB (Ğ²ÑÑ– Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ğ¸)  
- ĞŸÑ–ÑĞ»Ñ: 15 KB (Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ NTC)
- **Ğ•ĞºĞ¾Ğ½Ğ¾Ğ¼Ñ–Ñ: 33 KB Flash!**

### ğŸ“ˆ ĞŸÑ–Ğ´ÑÑƒĞ¼Ğ¾Ğº:

| ĞÑĞ¿ĞµĞºÑ‚ | DS18B20 Ğ¿Ñ€Ğ¸ type="NTC" |
|--------|------------------------|
| ĞšĞ¾Ğ´ Ğ²Ğ¸ĞºĞ¾Ğ½ÑƒÑ”Ñ‚ÑŒÑÑ? | âŒ ĞĞ† |
| ĞĞ±'Ñ”ĞºÑ‚ ÑÑ‚Ğ²Ğ¾Ñ€ÑÑ”Ñ‚ÑŒÑÑ? | âŒ ĞĞ† |
| ĞŸĞ°Ğ¼'ÑÑ‚ÑŒ RAM Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ? | âŒ ĞĞ† |
| ĞšĞ¾Ğ´ ĞºĞ¾Ğ¼Ğ¿Ñ–Ğ»ÑÑ”Ñ‚ÑŒÑÑ? | âš ï¸ Ğ¢ĞĞš (Ğ·Ğ° Ğ·Ğ°Ğ¼Ğ¾Ğ²Ñ‡ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼) |
| Flash Ğ·Ğ°Ğ¹Ğ¼Ğ°Ñ”? | âš ï¸ Ğ¢ĞĞš (~15 KB) |
| ĞœĞ¾Ğ¶Ğ½Ğ° Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸? | âœ… Ğ¢ĞĞš (Ñ‡ĞµÑ€ĞµĞ· Kconfig) |

### ğŸ’¡ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ñ–Ñ:

Ğ”Ğ»Ñ production Ğ¿Ñ€Ğ¾ÑˆĞ¸Ğ²ĞºĞ¸ Ğ·Ğ°Ğ²Ğ¶Ğ´Ğ¸ Ğ²Ğ¸Ğ¼Ğ¸ĞºĞ°Ğ¹Ñ‚Ğµ Ğ½ĞµĞ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ñ– Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Kconfig - Ñ†Ğµ Ğ·Ğ²Ñ–Ğ»ÑŒĞ½Ğ¸Ñ‚ÑŒ Flash Ğ¿Ğ°Ğ¼'ÑÑ‚ÑŒ Ğ´Ğ»Ñ Ğ²Ğ°ÑˆĞ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ñƒ!
